# ZEONE AI Dependencies
# =====================
# Heavy AI/ML libraries for Cortex module
# Install: pip install -r requirements/ai.txt
# Size: ~3-5GB (includes PyTorch, models, etc.)
#
# [WARNING] These are optional. Node runs in LITE mode without them.
# [AUDIT] 2025-01 - Verified compatibility and wheel availability

# ============================================================================
# Core ML Framework
# ============================================================================

# PyTorch (CPU by default, GPU via pip install torch --index-url ...)
torch>=2.1.0,<3.0.0

# Transformers for LLM inference
transformers>=4.36.0,<5.0.0

# Accelerate for efficient model loading (used by transformers)
accelerate>=0.25.0

# Safe tensor format (fast & secure model loading)
safetensors>=0.4.0

# ============================================================================
# Embeddings & Vector Store
# ============================================================================

# Sentence embeddings for RAG
sentence-transformers>=2.2.0,<3.0.0

# Vector database (local persistent storage)
# [PINNED] ChromaDB API changes frequently between minor versions
chromadb>=0.4.0,<0.5.0

# ============================================================================
# Document Processing
# ============================================================================

# PDF text extraction
pypdf>=3.17.0

# Image processing (Pillow has wheels for all platforms)
pillow>=10.0.0

# [CRITICAL] Use headless version - no GUI dependencies
# Replaces opencv-python which pulls in Qt/GTK
opencv-python-headless>=4.8.0

# Perceptual image hashing for deduplication
imagehash>=4.3.0

# ============================================================================
# Vision Models
# ============================================================================

# Einops for tensor operations
einops>=0.7.0

# PyTorch Image Models
timm>=0.9.0

# ============================================================================
# Face Recognition
# ============================================================================

# InsightFace (uses ONNX Runtime internally)
insightface>=0.7.0

# ONNX Runtime (CPU version - has wheels)
# For GPU: pip install onnxruntime-gpu>=1.16.0
onnxruntime>=1.16.0,<2.0.0

# Clustering for face grouping
scikit-learn>=1.3.0,<2.0.0

# ============================================================================
# PII Detection & Compliance
# ============================================================================

# Microsoft Presidio for PII detection
presidio-analyzer>=2.2.0
presidio-anonymizer>=2.2.0

# SpaCy NLP (required by Presidio)
# [NOTE] Download model: python -m spacy download en_core_web_lg
spacy>=3.7.0,<4.0.0

# GeoIP for jurisdiction detection
geoip2>=4.8.0

# ============================================================================
# Compatibility Pins
# ============================================================================

# NumPy 2.0 breaks many packages - pin to 1.x until ecosystem catches up
numpy>=1.24.0,<2.0.0

# Protobuf version conflicts are common with onnxruntime/tensorboard
# [CRITICAL] Pin to 3.x or 4.x based on onnxruntime requirements
protobuf>=4.21.0,<5.0.0

# LZ4 compression for tensor streaming (optional but recommended)
lz4>=4.3.0
